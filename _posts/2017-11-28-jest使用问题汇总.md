---
layout:     post
title:      "2017-11-28-jest使用问题汇总"
date:       "2017-11-28"
author:     "XuBaoshi"
header-img: "img/post-bg-03.jpg"
---
# jest使用问题汇总 #
Jest是Facebook推出的用于测试服务与react应用程序的Javascrpt单元测试框架，使用时所遇到的问题汇总如下：
### 1. ###
![/img/jest/1.png](/img/jest/1.png)
<br>
解决方式（macOS）：

    brew install watchman

ps：如果没有下载brew参考 [https://brew.sh/](https://brew.sh/) <br>

[https://github.com/facebook/jest/issues/3436](https://github.com/facebook/jest/issues/3436)

### 2. ###
![/img/jest/2.png](/img/jest/2.png)
<br>

产生原因：react-test-renderer版本与react版本不匹配。react-test-renderer 16.x版本 需要 react 16.x版本才可以。注意版本匹配。
<br>[https://github.com/chenglou/react-motion/issues/447](https://github.com/chenglou/react-motion/issues/447)

### 3. ###
![/img/jest/3.png](/img/jest/3.png)

产生原因：需要依赖enzyme-adapter-react-15

    npm install enzyme-adapter-react-15

    import { configure } from 'enzyme';
    import Adapter from 'enzyme-adapter-react-15';

    configure({ adapter: new Adapter() });

### 4. ###
![/img/jest/4.png](/img/jest/4.png)

如果项目是create-react-app生成的，将下面的代码放置在 'config/polyfills.js'，或新建一个js文件如setupTests.js将代码粘贴至此文件，package.json配置如下（具体配置按照自己文件放置而定）：

    window.matchMedia = window.matchMedia || function() {
        return {
            matches : false,
            addListener : function() {},
            removeListener: function() {}
        };
    };

![/img/jest/5.png](/img/jest/5.png)






